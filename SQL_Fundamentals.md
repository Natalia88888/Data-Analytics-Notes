# üìä SQL –¥–ª—è –ê–Ω–∞–ª–∏—Ç–∏–∫–∞: –û—Ç –ë–∞–∑—ã –¥–æ –û—Ñ—Ñ–µ—Ä–∞

–≠—Ç–æ—Ç –∫–æ–Ω—Å–ø–µ–∫—Ç ‚Äî –º–æ–π —à—Ç—É—Ä–º–∞–Ω –¥–ª—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –∫ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—è–º. –ò–∑—É—á–∞—é –≤ –ø—É—Ç–∏, –ø—Ä–∏–º–µ–Ω—è—é –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ.

## 1. –ó–æ–ª–æ—Ç–æ–π –ø–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è SQL –∑–∞–ø—Ä–æ—Å–∞
*–°–µ—Ä–≤–µ—Ä —á–∏—Ç–∞–µ—Ç –∫–æ–¥ –Ω–µ —Ç–∞–∫, –∫–∞–∫ –º—ã! –ó–∞–ø–æ–º–Ω–∏ —ç—Ç—É –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å, —á—Ç–æ–±—ã –Ω–µ –¥–µ–ª–∞—Ç—å –ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫:*

1. **FROM** ‚Äî –û—Ç–∫—É–¥–∞ –±–µ—Ä–µ–º –¥–∞–Ω–Ω—ã–µ? (–¢–∞–±–ª–∏—Ü—ã –∏ JOIN-—ã)
2. **WHERE** ‚Äî –§–∏–ª—å—Ç—Ä—É–µ–º —Å—Ç—Ä–æ–∫–∏ (–¥–æ —Ä–∞—Å—á–µ—Ç–æ–≤).
3. **GROUP BY** ‚Äî –ì—Ä—É–ø–ø–∏—Ä—É–µ–º –¥–∞–Ω–Ω—ã–µ –≤ "–∫—É—á–∫–∏".
4. **HAVING** ‚Äî –§–∏–ª—å—Ç—Ä—É–µ–º —É–∂–µ —Å–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–ø–æ—Å–ª–µ —Ä–∞—Å—á–µ—Ç–æ–≤).
5. **SELECT** ‚Äî –í—ã–±–∏—Ä–∞–µ–º –∫–æ–ª–æ–Ω–∫–∏ –¥–ª—è –≤—ã–≤–æ–¥–∞.
6. **ORDER BY** ‚Äî –°–æ—Ä—Ç–∏—Ä—É–µ–º —Ñ–∏–Ω–∞–ª—å–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç.

---

## 2. JOIN-—ã: –ö–∞–∫ –æ–±—ä–µ–¥–∏–Ω—è—Ç—å —Ç–∞–±–ª–∏—Ü—ã –±–µ–∑ –±–æ–ª–∏
*–ü—Ä–µ–¥—Å—Ç–∞–≤—å –¥–≤–µ —Ç–∞–±–ª–∏—Ü—ã: `Operators` (–õ—é–¥–∏) –∏ `Calls` (–ó–≤–æ–Ω–∫–∏).*

*   **INNER JOIN**: –¢–æ–ª—å–∫–æ —Ç–µ, –∫—Ç–æ –µ—Å—Ç—å –≤ –æ–±–µ–∏—Ö —Ç–∞–±–ª–∏—Ü–∞—Ö. (–¢–æ–ª—å–∫–æ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã, –∫–æ—Ç–æ—Ä—ã–µ —Å–æ–≤–µ—Ä—à–∏–ª–∏ –∑–≤–æ–Ω–∫–∏).
*   **LEFT JOIN**: –í—Å–µ –∏–∑ –ª–µ–≤–æ–π —Ç–∞–±–ª–∏—Ü—ã + —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è –∏–∑ –ø—Ä–∞–≤–æ–π. (–í—Å–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã, –¥–∞–∂–µ –µ—Å–ª–∏ —É –Ω–∏—Ö 0 –∑–≤–æ–Ω–∫–æ–≤. –£ —Ç–µ—Ö, –∫—Ç–æ –Ω–µ –∑–≤–æ–Ω–∏–ª, –≤ –∫–æ–ª–æ–Ω–∫–µ –∑–≤–æ–Ω–∫–∞ –±—É–¥–µ—Ç `NULL`).
*   **–ö–∞–∫ –Ω–∞–π—Ç–∏ "–ø—É—Å—Ç–æ—Ç—É"?**
    `SELECT name FROM operators o LEFT JOIN calls c ON o.id = c.op_id WHERE c.id IS NULL;` ‚Äî –≠—Ç–æ –≤—ã–≤–µ–¥–µ—Ç —Ç–µ—Ö, –∫—Ç–æ –Ω–µ —Å–¥–µ–ª–∞–ª –Ω–∏ –æ–¥–Ω–æ–≥–æ –∑–≤–æ–Ω–∫–∞.

---

## 3. –ê–≥—Ä–µ–≥–∞—Ü–∏—è: –°—á–∏—Ç–∞–µ–º –¥–µ–Ω—å–≥–∏ –∏ –∑–≤–æ–Ω–∫–∏
*   `COUNT(*)` ‚Äî –°—á–∏—Ç–∞–µ—Ç –≤—Å–µ —Å—Ç—Ä–æ–∫–∏.
*   `COUNT(column)` ‚Äî –°—á–∏—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–µ–ø—É—Å—Ç—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è (–ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç NULL).
*   `SUM()`, `AVG()`, `MIN()`, `MAX()` ‚Äî –ë–∞–∑–æ–≤—ã–µ —Ä–∞—Å—á–µ—Ç—ã.

**–í–∞–∂–Ω–æ:** –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å –∞–≥—Ä–µ–≥–∞—Ç–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é –≤ SELECT, –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∫–æ–ª–æ–Ω–∫–∏ –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ `GROUP BY`.

---

## 4. –û–∫–æ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (–¢–≤–æ–π "—Å–µ–∫—Ä–µ—Ç–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å")
*–ü–æ–∑–≤–æ–ª—è—é—Ç –¥–µ–ª–∞—Ç—å —Ä–∞—Å—á–µ—Ç—ã, –Ω–µ —Å—Ö–ª–æ–ø—ã–≤–∞—è —Ç–∞–±–ª–∏—Ü—É –≤ –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É.*

**–°–∏–Ω—Ç–∞–∫—Å–∏—Å:** `–§–£–ù–ö–¶–ò–Ø() OVER(PARTITION BY –∫–æ–ª–æ–Ω–∫–∞ ORDER BY –∫–æ–ª–æ–Ω–∫–∞)`

*   **ROW_NUMBER()** ‚Äî –ü—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç –ø–æ—Ä—è–¥–∫–æ–≤—ã–π –Ω–æ–º–µ—Ä —Å—Ç—Ä–æ–∫–µ.
*   **PARTITION BY** ‚Äî –≠—Ç–æ –∫–∞–∫ "GROUP BY", –Ω–æ –≤–Ω—É—Ç—Ä–∏ –æ–∫–Ω–∞. –ù—É–º–µ—Ä–∞—Ü–∏—è –∏–ª–∏ —Ä–∞—Å—á–µ—Ç –Ω–∞—á–Ω–µ—Ç—Å—è –∑–∞–Ω–æ–≤–æ –¥–ª—è –∫–∞–∂–¥–æ–π –≥—Ä—É–ø–ø—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ –æ—Ç–¥–µ–ª—å–Ω–æ).

**–ü—Ä–∏–º–µ—Ä:** –ù–∞–π—Ç–∏ 1-–π –∑–≤–æ–Ω–æ–∫ –∫–∞–∂–¥–æ–≥–æ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞:
`SELECT * FROM (SELECT op_id, call_id, ROW_NUMBER() OVER(PARTITION BY op_id ORDER BY call_time) as rn FROM calls) as t WHERE rn = 1;`

---

## 5. –†–∞–±–æ—Ç–∞ —Å NULL (–ö–æ–≤–∞—Ä–Ω—ã–µ –ø—É—Å—Ç–æ—Ç—ã)
*   `COALESCE(column, 0)` ‚Äî –ï—Å–ª–∏ –≤ –∫–æ–ª–æ–Ω–∫–µ NULL, –∑–∞–º–µ–Ω–∏ –µ–≥–æ –Ω–∞ 0. –û—á–µ–Ω—å –ø–æ–ª–µ–∑–Ω–æ –ø—Ä–∏ —Ä–∞—Å—á–µ—Ç–µ —Å—É–º–º, —á—Ç–æ–±—ã –Ω–∏—á–µ–≥–æ –Ω–µ —Å–ª–æ–º–∞–ª–æ—Å—å.
*   `column IS NULL` ‚Äî –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–ø–æ—Å–æ–± –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞ –ø—É—Å—Ç–æ—Ç—É (–Ω–µ–ª—å–∑—è –ø–∏—Å–∞—Ç—å `= NULL`).




## 5. –†–∞–±–æ—Ç–∞ —Å NULL (–ö–æ–≤–∞—Ä–Ω—ã–µ –ø—É—Å—Ç–æ—Ç—ã)
*   `COALESCE(column, 0)` ‚Äî –ï—Å–ª–∏ –≤ –∫–æ–ª–æ–Ω–∫–µ NULL, –∑–∞–º–µ–Ω–∏ –µ–≥–æ –Ω–∞ 0. –û—á–µ–Ω—å –ø–æ–ª–µ–∑–Ω–æ –ø—Ä–∏ —Ä–∞—Å—á–µ—Ç–µ —Å—É–º–º, —á—Ç–æ–±—ã –Ω–∏—á–µ–≥–æ –Ω–µ —Å–ª–æ–º–∞–ª–æ—Å—å.
*   `column IS NULL` ‚Äî –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–ø–æ—Å–æ–± –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞ –ø—É—Å—Ç–æ—Ç—É (–Ω–µ–ª—å–∑—è –ø–∏—Å–∞—Ç—å `= NULL`).
